{"paragraphs":[{"text":"%md\n# About\n**Objective:** Become familiar with using Spark MLlib to run Linear Classification on Hadoop\n**File locations:** spark-labs/kc_house_data.csv\n**Successful outcome:** A trained linear regression model that predicts the price of a house in Kings County, USA\n**Before you begin:**\n**Related lessons:** Supervised learning, Linear regression\n\n---","user":"admin","dateUpdated":"2019-04-10T09:03:19+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544342_-1533770937","id":"20171105-200834_1116095891","dateCreated":"2019-01-25T10:29:04+0000","dateStarted":"2019-04-10T09:03:19+0000","dateFinished":"2019-04-10T09:03:19+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:147995"},{"text":"%md\n# Setup\n---","user":"admin","dateUpdated":"2019-04-10T09:03:19+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544343_1705527235","id":"20181114-164229_902436001","dateCreated":"2019-01-25T10:29:04+0000","dateStarted":"2019-04-10T09:03:19+0000","dateFinished":"2019-04-10T09:03:19+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:147996"},{"title":"Retrieve the house dataset and store it in HDFS","text":"%sh\n\nrm -f kc_house_data.csv\nwget https://s3-us-west-1.amazonaws.com/sci-241/house_data/kc_house_data.csv\nhdfs dfs -rm spark-labs/kc_house_data.csv\nhdfs dfs -put kc_house_data.csv spark-labs/","user":"admin","dateUpdated":"2019-04-10T09:03:19+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"editorMode":"ace/mode/sh","title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1554886586992_-402483164","id":"20190410-085626_402131544","dateCreated":"2019-04-10T08:56:26+0000","dateStarted":"2019-04-10T09:03:19+0000","dateFinished":"2019-04-10T09:03:25+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:147997"},{"title":"Import libraries","text":"%pyspark\n\nfrom pyspark.ml.feature import VectorAssembler\nfrom pyspark.ml.regression import LinearRegression\nfrom pyspark.ml.evaluation import RegressionEvaluator\nfrom pyspark.sql.functions import lit","user":"admin","dateUpdated":"2019-04-10T09:03:25+0000","config":{"tableHide":false,"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544344_-957815845","id":"20181114-164621_138379904","dateCreated":"2019-01-25T10:29:04+0000","dateStarted":"2019-04-10T09:03:25+0000","dateFinished":"2019-04-10T09:03:25+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:147998"},{"text":"%md\n# Lab\n---","user":"admin","dateUpdated":"2019-04-10T09:03:26+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544344_-1777177420","id":"20181114-164844_1661453681","dateCreated":"2019-01-25T10:29:04+0000","dateStarted":"2019-04-10T09:03:26+0000","dateFinished":"2019-04-10T09:03:26+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:147999"},{"text":"%md\n## Load and inspect the data","user":"admin","dateUpdated":"2019-04-10T09:03:26+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544344_283319060","id":"20181120-105601_996869670","dateCreated":"2019-01-25T10:29:04+0000","dateStarted":"2019-04-10T09:03:26+0000","dateFinished":"2019-04-10T09:03:26+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148000"},{"text":"%md\nFirst we need to load the data into a dataframe using the 'header' and 'inferSchema' options.","user":"admin","dateUpdated":"2019-04-10T09:03:26+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544344_-1240240780","id":"20181120-104302_1071736728","dateCreated":"2019-01-25T10:29:04+0000","dateStarted":"2019-04-10T09:03:26+0000","dateFinished":"2019-04-10T09:03:26+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148001"},{"title":"1 - Load the data into a Spark DataFrame","text":"","user":"admin","dateUpdated":"2019-04-10T09:03:26+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionSupport":true,"completionKey":"TAB"},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544344_1692577825","id":"20171105-200623_656362182","dateCreated":"2019-01-25T10:29:04+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148002"},{"text":"%md\nThe data we are working with for this lab represents facts about houses sold in King County, Washington, USA\nOur goal is to predict the price they were sold for.\nWhen doing machine learning, it is important to look at the data you are working with\nUse z.show(data) to view the first 20 rows of your data","user":"admin","dateUpdated":"2019-04-10T09:03:26+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544345_1486494446","id":"20171105-201923_413365117","dateCreated":"2019-01-25T10:29:04+0000","dateStarted":"2019-04-10T09:03:26+0000","dateFinished":"2019-04-10T09:03:26+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148003"},{"title":"2 - Inspect the data","text":"","user":"admin","dateUpdated":"2019-04-10T09:03:26+0000","config":{"tableHide":false,"editorSetting":{"language":"scala","editOnDblClick":false,"completionSupport":true,"completionKey":"TAB"},"colWidth":12,"editorMode":"ace/mode/scala","editorHide":false,"fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544346_-987808952","id":"20171105-201709_849284875","dateCreated":"2019-01-25T10:29:04+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148004"},{"text":"%md\n## Transform the DataFrame into one usable by Spark ML\n\n\nWe are going to create\n* a 'features' column containing a vector of the relevant columns of our dataset as well as\n* a 'label' column containing the price.","user":"admin","dateUpdated":"2019-04-10T09:03:26+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544346_1154093653","id":"20171105-201449_1118165660","dateCreated":"2019-01-25T10:29:04+0000","dateStarted":"2019-04-10T09:03:26+0000","dateFinished":"2019-04-10T09:03:26+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148005"},{"text":"%md\n\nUse the VectorAssembler transformer to assemble those columns [\"bedrooms\",\"bathrooms\",\"sqft_living\",\"sqft_lot\",\"floors\",\"grade\",\"yr_built\",\"lat\",\"long\",\"yr_renovated\"]\ninto a single \"features\" column.","user":"admin","dateUpdated":"2019-04-10T09:03:27+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544346_-2097249513","id":"20181120-105834_455616424","dateCreated":"2019-01-25T10:29:04+0000","dateStarted":"2019-04-10T09:03:27+0000","dateFinished":"2019-04-10T09:03:27+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148006"},{"title":"3 - Create the assembler object","text":"","user":"admin","dateUpdated":"2019-04-10T09:03:27+0000","config":{"tableHide":false,"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544347_-312944107","id":"20181120-105833_534068450","dateCreated":"2019-01-25T10:29:04+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148007"},{"title":"4 - Use the assembler to vectorize your data and inspect the new 'features' column","text":"","user":"admin","dateUpdated":"2019-04-10T09:03:27+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"title":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"id":"string","date":"string","price":"string","bedrooms":"string","bathrooms":"string","sqft_living":"string","sqft_lot":"string","floors":"string","waterfront":"string","view":"string","condition":"string","grade":"string","sqft_above":"string","sqft_basement":"string","yr_built":"string","yr_renovated":"string","zipcode":"string","lat":"string","long":"string","sqft_living15":"string","sqft_lot15":"string","features":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544347_1498818974","id":"20181120-112316_2086924427","dateCreated":"2019-01-25T10:29:04+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148008"},{"title":"5 - Rename the price column to label","text":"","user":"admin","dateUpdated":"2019-04-10T09:03:27+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544347_-790251046","id":"20181120-113504_223187005","dateCreated":"2019-01-25T10:29:04+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148009"},{"text":"%md\nTo complete this part of the lab, let us review the transformations we have made.","user":"admin","dateUpdated":"2019-04-10T09:03:27+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544347_1034258057","id":"20181120-114527_214358487","dateCreated":"2019-01-25T10:29:04+0000","dateStarted":"2019-04-10T09:03:27+0000","dateFinished":"2019-04-10T09:03:27+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148010"},{"title":"6 - Show the label and features columns","text":"","user":"admin","dateUpdated":"2019-04-10T09:03:27+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"title":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"label":"string","features":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544347_908145566","id":"20181120-113500_266890482","dateCreated":"2019-01-25T10:29:04+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148011"},{"text":"%md\nThis is the data that we will feed to our machine learning algorithm.","user":"admin","dateUpdated":"2019-04-10T09:03:27+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544347_-1031439587","id":"20181120-114756_1372220167","dateCreated":"2019-01-25T10:29:04+0000","dateStarted":"2019-04-10T09:03:27+0000","dateFinished":"2019-04-10T09:03:27+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148012"},{"text":"%md\n## Train a model","user":"admin","dateUpdated":"2019-04-10T09:03:27+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544348_-1761593614","id":"20181120-142217_940991033","dateCreated":"2019-01-25T10:29:04+0000","dateStarted":"2019-04-10T09:03:27+0000","dateFinished":"2019-04-10T09:03:27+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148013"},{"text":"%md\nNext we need to split this data between a training and a testing set.\nWe will keep \n* 80% of the rows for training and save the other 20% for testing on and\n* use a seed of 101 that will help everyone in the class have similar results.","user":"admin","dateUpdated":"2019-04-10T09:03:27+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544348_-760770806","id":"20181120-142338_951640488","dateCreated":"2019-01-25T10:29:04+0000","dateStarted":"2019-04-10T09:03:27+0000","dateFinished":"2019-04-10T09:03:27+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148014"},{"title":"7 - Split the data into training and test instances","text":"","user":"admin","dateUpdated":"2019-04-10T09:03:28+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544348_1512973191","id":"20181120-142341_921909094","dateCreated":"2019-01-25T10:29:04+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148015"},{"title":"8 - Create an object of the class LinearRegression with the default parameters","text":"","user":"admin","dateUpdated":"2019-04-10T09:03:28+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544348_-525629293","id":"20181120-145510_996717762","dateCreated":"2019-01-25T10:29:04+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148016"},{"text":"%md\n\nNow we can train the model on the training data. This may take a few seconds to run.","user":"admin","dateUpdated":"2019-04-10T09:03:28+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544348_-463936984","id":"20181120-145714_1379348985","dateCreated":"2019-01-25T10:29:04+0000","dateStarted":"2019-04-10T09:03:28+0000","dateFinished":"2019-04-10T09:03:28+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148017"},{"title":"9 - Train the model on the training data","text":"","user":"admin","dateUpdated":"2019-04-10T09:03:28+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544348_270921761","id":"20181120-145719_1439294915","dateCreated":"2019-01-25T10:29:04+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148018"},{"text":"%md\nUse the trained model to make predictions on the test data by calling the 'transform' transformation of the model on the test data.\n","user":"admin","dateUpdated":"2019-04-10T09:03:28+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544348_-1003079875","id":"20181120-150049_1309747784","dateCreated":"2019-01-25T10:29:04+0000","dateStarted":"2019-04-10T09:03:28+0000","dateFinished":"2019-04-10T09:03:28+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148019"},{"title":"10 - Use the model to make predictions","text":"","user":"admin","dateUpdated":"2019-04-10T09:03:28+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544349_-664070149","id":"20181120-145938_1249353348","dateCreated":"2019-01-25T10:29:04+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148020"},{"text":"%md\nThe last dataframe now has an extra prediction column\nWe can compare the prediction to the actual sale price of a few of the rows in the test set","user":"admin","dateUpdated":"2019-04-10T09:03:28+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544349_-17262327","id":"20181120-150622_1935248893","dateCreated":"2019-01-25T10:29:04+0000","dateStarted":"2019-04-10T09:03:28+0000","dateFinished":"2019-04-10T09:03:28+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148021"},{"title":"11 - Check the accuracy of the predictions","text":"","user":"admin","dateUpdated":"2019-04-10T09:03:28+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544349_-767548814","id":"20181120-150644_1026223454","dateCreated":"2019-01-25T10:29:04+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148022"},{"text":"%md\nNow we are going to use an evaluator with the R2 measure to evaluate the accuracy of our model.","user":"admin","dateUpdated":"2019-04-10T09:03:28+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544349_-1326709684","id":"20181120-151457_1794233685","dateCreated":"2019-01-25T10:29:04+0000","dateStarted":"2019-04-10T09:03:28+0000","dateFinished":"2019-04-10T09:03:28+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148023"},{"title":"12 - Create an RegressionEvaluator object","text":"","user":"admin","dateUpdated":"2019-04-10T09:03:28+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544349_913474785","id":"20181120-151446_1979930885","dateCreated":"2019-01-25T10:29:04+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148024"},{"title":"13 - Print out the R2 measure","text":"\n","user":"admin","dateUpdated":"2019-04-10T09:03:29+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544349_2126146159","id":"20181120-152222_1366950715","dateCreated":"2019-01-25T10:29:04+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148025"},{"text":"%md\n\nWe can use Zeppelin's built in features to visualize our labels and predictions.\n1. Copy and paste the code below in the next paragraph \n2. Use the pivot table feature \n3. Choose the scatter plot visualization\n4. select 'sqft_living' for the xAxis, 'label' for the yAxis and 'group' for the group.\n\n~~~\np1 = predictions.select([\"bedrooms\",\"bathrooms\",\"sqft_living\",\"sqft_lot\",\"floors\",\"grade\",\"yr_built\",'yr_renovated','prediction'])\np2 = predictions.select([\"bedrooms\",\"bathrooms\",\"sqft_living\",\"sqft_lot\",\"floors\",\"grade\",\"yr_built\",'yr_renovated','label'])\np1 = p1.withColumn(\"group\",lit(\"prediction\")).withColumnRenamed('prediction','label')\np2 = p2.withColumn(\"group\",lit(\"actual\"))\ntoVisualize = p1.union(p2)\nz.show(toVisualize)\n~~~\n","user":"admin","dateUpdated":"2019-04-10T09:03:29+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544349_126785852","id":"20181120-154217_542387411","dateCreated":"2019-01-25T10:29:04+0000","dateStarted":"2019-04-10T09:03:29+0000","dateFinished":"2019-04-10T09:03:29+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148026"},{"title":"14 - Visualize the data","text":"","user":"admin","dateUpdated":"2019-04-10T09:03:29+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544349_-324143590","id":"20181120-155137_1636863754","dateCreated":"2019-01-25T10:29:04+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148027"},{"title":"Bonus","text":"%md\nIf you have extra time, try to improve your model.\n* Combine the assembler and regressor into a Pipeline\n* Go back to step #4 in the notebook and change the columns included as features\n* Try to include some location information\n* After editing that cell, run the entire notebook again by hitting the play button at the top","user":"admin","dateUpdated":"2019-04-10T09:03:29+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544349_-1654445515","id":"20181120-152344_1404227962","dateCreated":"2019-01-25T10:29:04+0000","dateStarted":"2019-04-10T09:03:29+0000","dateFinished":"2019-04-10T09:03:29+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148028"},{"text":"%md\n# Result\n**You have now:** You have now successfully trained a linear model and evaluated its accuracy.\n\n---","user":"admin","dateUpdated":"2019-04-10T09:03:29+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544349_1252215060","id":"20181119-142716_792318228","dateCreated":"2019-01-25T10:29:04+0000","dateStarted":"2019-04-10T09:03:29+0000","dateFinished":"2019-04-10T09:03:29+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148029"},{"text":"%md\n# Solution\n---","user":"admin","dateUpdated":"2019-04-10T09:03:29+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544350_313589058","id":"20171113-155535_1769142099","dateCreated":"2019-01-25T10:29:04+0000","dateStarted":"2019-04-10T09:03:29+0000","dateFinished":"2019-04-10T09:03:29+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148030"},{"title":"1 - Load the data into a Spark DataFrame","text":"%pyspark\n\ndata = spark.read.format('csv').option('header',True).option('inferSchema',True).load('spark-labs/kc_house_data.csv')","user":"admin","dateUpdated":"2019-04-10T09:03:29+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionSupport":true,"completionKey":"TAB"},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"runtimeInfos":{"jobUrl":{"propertyName":"jobUrl","label":"SPARK JOB","tooltip":"View in Spark web UI","group":"spark","values":["http://ip-172-31-1-200.eu-central-1.compute.internal:4040/jobs/job?id=8241","http://ip-172-31-1-200.eu-central-1.compute.internal:4040/jobs/job?id=8242"],"interpreterSettingId":"spark2"}},"apps":[],"jobName":"paragraph_1548408544350_-945231629","id":"20181120-104552_1855149124","dateCreated":"2019-01-25T10:29:04+0000","dateStarted":"2019-04-10T09:03:29+0000","dateFinished":"2019-04-10T09:03:30+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148031"},{"title":"2 - Inspect the data","text":"%pyspark\n\nz.show(data)","user":"admin","dateUpdated":"2019-04-10T09:03:30+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"title":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"id":"string","date":"string","price":"string","bedrooms":"string","bathrooms":"string","sqft_living":"string","sqft_lot":"string","floors":"string","waterfront":"string","view":"string","condition":"string","grade":"string","sqft_above":"string","sqft_basement":"string","yr_built":"string","yr_renovated":"string","zipcode":"string","lat":"string","long":"string","sqft_living15":"string","sqft_lot15":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"runtimeInfos":{"jobUrl":{"propertyName":"jobUrl","label":"SPARK JOB","tooltip":"View in Spark web UI","group":"spark","values":["http://ip-172-31-1-200.eu-central-1.compute.internal:4040/jobs/job?id=8243"],"interpreterSettingId":"spark2"}},"apps":[],"jobName":"paragraph_1548408544350_97446049","id":"20181120-104909_658872","dateCreated":"2019-01-25T10:29:04+0000","dateStarted":"2019-04-10T09:03:30+0000","dateFinished":"2019-04-10T09:03:31+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148032"},{"title":"3 - Create the assembler object","text":"%pyspark\n\nassembler = VectorAssembler(inputCols=[\"bedrooms\",\"bathrooms\",\"sqft_living\",\"sqft_lot\",\"floors\",\"grade\",\"yr_built\",\"lat\",\"long\",\"yr_renovated\"], outputCol=\"features\")","user":"admin","dateUpdated":"2019-04-10T09:03:31+0000","config":{"tableHide":false,"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544352_-285473673","id":"20181120-110651_101689054","dateCreated":"2019-01-25T10:29:04+0000","dateStarted":"2019-04-10T09:03:31+0000","dateFinished":"2019-04-10T09:03:31+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148033"},{"title":"4 - Use the assembler to vectorize your data and inspect the new 'features' column","text":"%pyspark\n\nvectorized = assembler.transform(data)\nz.show(vectorized.select('features'))","user":"admin","dateUpdated":"2019-04-10T09:03:31+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"editorHide":false,"title":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"features":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"runtimeInfos":{"jobUrl":{"propertyName":"jobUrl","label":"SPARK JOB","tooltip":"View in Spark web UI","group":"spark","values":["http://ip-172-31-1-200.eu-central-1.compute.internal:4040/jobs/job?id=8244"],"interpreterSettingId":"spark2"}},"apps":[],"jobName":"paragraph_1548408544352_489391936","id":"20181120-112632_458922138","dateCreated":"2019-01-25T10:29:04+0000","dateStarted":"2019-04-10T09:03:32+0000","dateFinished":"2019-04-10T09:03:32+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148034"},{"title":"5 - Rename the price column to label","text":"%pyspark\n\nlabeled = vectorized.withColumnRenamed(\"price\",\"label\")","user":"admin","dateUpdated":"2019-04-10T09:03:32+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544352_1232078490","id":"20181120-114238_1185321019","dateCreated":"2019-01-25T10:29:04+0000","dateStarted":"2019-04-10T09:03:32+0000","dateFinished":"2019-04-10T09:03:32+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148035"},{"title":"6 - Show the label and features columns","text":"%pyspark\n\nz.show(labeled.select('label','features'))","user":"admin","dateUpdated":"2019-04-10T09:03:32+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"editorHide":false,"title":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"label":"string","features":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"runtimeInfos":{"jobUrl":{"propertyName":"jobUrl","label":"SPARK JOB","tooltip":"View in Spark web UI","group":"spark","values":["http://ip-172-31-1-200.eu-central-1.compute.internal:4040/jobs/job?id=8245"],"interpreterSettingId":"spark2"}},"apps":[],"jobName":"paragraph_1548408544352_-1489081107","id":"20181120-114939_975067380","dateCreated":"2019-01-25T10:29:04+0000","dateStarted":"2019-04-10T09:03:32+0000","dateFinished":"2019-04-10T09:03:32+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148036"},{"title":"7 - Split the data into training and test instances","text":"%pyspark\n\ntrain, test = labeled.randomSplit([0.8,0.2],seed=101)","user":"admin","dateUpdated":"2019-04-10T09:03:32+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544353_2026926281","id":"20181120-145305_563969576","dateCreated":"2019-01-25T10:29:04+0000","dateStarted":"2019-04-10T09:03:33+0000","dateFinished":"2019-04-10T09:03:33+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148037"},{"title":"8 - Create an object of the class LinearRegression with the default parameters","text":"%pyspark\n\nregressor = LinearRegression()","user":"admin","dateUpdated":"2019-04-10T09:03:33+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544353_-258791814","id":"20181120-145610_873155213","dateCreated":"2019-01-25T10:29:04+0000","dateStarted":"2019-04-10T09:03:33+0000","dateFinished":"2019-04-10T09:03:33+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148038"},{"title":"9 - Train the model on the training data","text":"%pyspark\n\nmodel = regressor.fit(train)","user":"admin","dateUpdated":"2019-04-10T09:03:33+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"runtimeInfos":{"jobUrl":{"propertyName":"jobUrl","label":"SPARK JOB","tooltip":"View in Spark web UI","group":"spark","values":["http://ip-172-31-1-200.eu-central-1.compute.internal:4040/jobs/job?id=8246","http://ip-172-31-1-200.eu-central-1.compute.internal:4040/jobs/job?id=8247","http://ip-172-31-1-200.eu-central-1.compute.internal:4040/jobs/job?id=8248","http://ip-172-31-1-200.eu-central-1.compute.internal:4040/jobs/job?id=8249","http://ip-172-31-1-200.eu-central-1.compute.internal:4040/jobs/job?id=8250"],"interpreterSettingId":"spark2"}},"apps":[],"jobName":"paragraph_1548408544353_-1614488077","id":"20181120-145840_1388968573","dateCreated":"2019-01-25T10:29:04+0000","dateStarted":"2019-04-10T09:03:33+0000","dateFinished":"2019-04-10T09:03:36+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148039"},{"title":"10 - Use the model to make predictions","text":"%pyspark\n\npredictions = model.transform(test)","user":"admin","dateUpdated":"2019-04-10T09:03:36+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544353_-946464925","id":"20181120-150448_728157481","dateCreated":"2019-01-25T10:29:04+0000","dateStarted":"2019-04-10T09:03:36+0000","dateFinished":"2019-04-10T09:03:36+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148040"},{"title":"11 - Check the accuracy of the predictions","text":"%pyspark\n\nz.show(predictions.select(['label','prediction']))","user":"admin","dateUpdated":"2019-04-10T09:03:36+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"editorHide":false,"title":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"label":"string","prediction":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"runtimeInfos":{"jobUrl":{"propertyName":"jobUrl","label":"SPARK JOB","tooltip":"View in Spark web UI","group":"spark","values":["http://ip-172-31-1-200.eu-central-1.compute.internal:4040/jobs/job?id=8251"],"interpreterSettingId":"spark2"}},"apps":[],"jobName":"paragraph_1548408544353_1308052650","id":"20181120-150939_881312020","dateCreated":"2019-01-25T10:29:04+0000","dateStarted":"2019-04-10T09:03:37+0000","dateFinished":"2019-04-10T09:03:37+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148041"},{"title":"12 - Create an RegressionEvaluator object","text":"%pyspark\n\nevaluator = RegressionEvaluator(metricName=\"r2\")","user":"admin","dateUpdated":"2019-04-10T09:03:37+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544354_-1712255652","id":"20181120-151720_132076766","dateCreated":"2019-01-25T10:29:04+0000","dateStarted":"2019-04-10T09:03:37+0000","dateFinished":"2019-04-10T09:03:37+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148042"},{"title":"13 - Print out the R2 measure","text":"%pyspark\n\nprint(evaluator.evaluate(predictions))\n","user":"admin","dateUpdated":"2019-04-10T09:03:37+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"runtimeInfos":{"jobUrl":{"propertyName":"jobUrl","label":"SPARK JOB","tooltip":"View in Spark web UI","group":"spark","values":["http://ip-172-31-1-200.eu-central-1.compute.internal:4040/jobs/job?id=8252"],"interpreterSettingId":"spark2"}},"apps":[],"jobName":"paragraph_1548408544354_-836238795","id":"20181120-151910_1553476663","dateCreated":"2019-01-25T10:29:04+0000","dateStarted":"2019-04-10T09:03:37+0000","dateFinished":"2019-04-10T09:03:38+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148043"},{"title":"14 - Visualize the data","text":"%pyspark\n\np1 = predictions.select([\"bedrooms\",\"bathrooms\",\"sqft_living\",\"sqft_lot\",\"floors\",\"grade\",\"yr_built\",'yr_renovated','prediction'])\np2 = predictions.select([\"bedrooms\",\"bathrooms\",\"sqft_living\",\"sqft_lot\",\"floors\",\"grade\",\"yr_built\",'yr_renovated','label'])\np1 = p1.withColumn(\"group\",lit(\"prediction\")).withColumnRenamed('prediction','label')\np2 = p2.withColumn(\"group\",lit(\"actual\"))\ntoVisualize = p1.union(p2)\nz.show(toVisualize)","user":"admin","dateUpdated":"2019-04-10T09:03:38+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"title":true,"results":{"0":{"graph":{"mode":"scatterChart","height":300,"optionOpen":true,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"bedrooms":"string","bathrooms":"string","sqft_living":"string","sqft_lot":"string","floors":"string","grade":"string","yr_built":"string","yr_renovated":"string","label":"string","group":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false},"scatterChart":{"xAxis":{"name":"sqft_living","index":2,"aggr":"sum"},"yAxis":{"name":"label","index":8,"aggr":"sum"},"group":{"name":"group","index":9,"aggr":"sum"}}}},"helium":{}}},"enabled":true},"settings":{"params":{},"forms":{}},"runtimeInfos":{"jobUrl":{"propertyName":"jobUrl","label":"SPARK JOB","tooltip":"View in Spark web UI","group":"spark","values":["http://ip-172-31-1-200.eu-central-1.compute.internal:4040/jobs/job?id=8253"],"interpreterSettingId":"spark2"}},"apps":[],"jobName":"paragraph_1548408544354_164509749","id":"20181120-160011_1782456236","dateCreated":"2019-01-25T10:29:04+0000","dateStarted":"2019-04-10T09:03:39+0000","dateFinished":"2019-04-10T09:03:39+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148044"},{"title":"Additional resources","text":"%md\nWe hope you've enjoyed this lab. Below are additional resources that you should find useful:\n\n1. [Hortonworks Apache Spark Tutorials](http://hortonworks.com/tutorials/#tuts-developers) are your natural next step where you can explore Spark in more depth.\n2. [Hortonworks Community Connection (HCC)](https://community.hortonworks.com/spaces/85/data-science.html?type=question) is a great resource for questions and answers on Spark, Data Analytics/Science, and many more Big Data topics.\n3. [Hortonworks Apache Spark Docs](https://docs.hortonworks.com/HDPDocuments/HDP3/HDP-3.0.1/spark-overview/content/analyzing_data_with_apache_spark.html) - official Spark documentation.\n4. [Hortonworks Apache Zeppelin Docs](https://docs.hortonworks.com/HDPDocuments/HDP3/HDP-3.0.1/zeppelin-overview/content/overview.html) - official Zeppelin documentation.","user":"admin","dateUpdated":"2019-04-10T09:03:39+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":10,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544355_-1359328276","id":"20181116-135131_93712280","dateCreated":"2019-01-25T10:29:04+0000","dateStarted":"2019-04-10T09:03:39+0000","dateFinished":"2019-04-10T09:03:39+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148045"},{"text":"%angular\n</br>\n<center>\n<a href=\"https://learn.hortonworks.com/\">\n  <img src=\"https://everpath-course-content.s3-accelerate.amazonaws.com/instructor%2Ftbroas_hortonworks_c_bsns5k%2Fpublic%2Flogo-training-1.1494860458677.png\" alt=\"Hortonworks University\" style=\"width:125px;height:125px;border:0;\" align=\"middle\">\n</a>\n</center>","user":"admin","dateUpdated":"2019-04-10T09:03:39+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":2,"editorMode":"ace/mode/undefined","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544355_-1149506809","id":"20181115-083751_61749794","dateCreated":"2019-01-25T10:29:04+0000","dateStarted":"2019-04-10T09:03:39+0000","dateFinished":"2019-04-10T09:03:39+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148046"},{"text":"%angular\n","user":"admin","dateUpdated":"2019-04-10T09:03:40+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/undefined","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1548408544355_1526038312","id":"20181120-161222_1016896442","dateCreated":"2019-01-25T10:29:04+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:148047"}],"name":"Labs/LinearRegression","id":"2E3CUZ6YF","noteParams":{},"noteForms":{},"angularObjects":{"md:shared_process":[],"python:shared_process":[],"angular:shared_process":[],"sh:shared_process":[],"spark2:shared_process":[]},"config":{"isZeppelinNotebookCronEnable":false,"looknfeel":"default","personalizedMode":"false"},"info":{}}
